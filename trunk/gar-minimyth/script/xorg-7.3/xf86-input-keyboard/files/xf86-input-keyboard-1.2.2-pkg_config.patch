diff -Naur xf86-input-keyboard-1.2.2-old/configure.ac xf86-input-keyboard-1.2.2-new/configure.ac
--- xf86-input-keyboard-1.2.2-old/configure.ac	2007-09-05 09:08:54.000000000 -0700
+++ xf86-input-keyboard-1.2.2-new/configure.ac	2008-01-22 22:21:24.000000000 -0800
@@ -41,6 +41,7 @@
 AC_DISABLE_STATIC
 AC_PROG_LIBTOOL
 AC_PROG_CC
+PKG_PROG_PKG_CONFIG
 
 AH_TOP([#include "xorg-server.h"])
 
@@ -108,7 +109,8 @@
 
 # Checks for pkg-config packages
 PKG_CHECK_MODULES(XORG, [xorg-server >= 1.2.99.0] xproto $REQUIRED_MODULES)
-sdkdir=$(pkg-config --variable=sdkdir xorg-server)
+m4_pattern_allow([^PKG_CONFIG_SYSROOT_DIR$])
+sdkdir="$PKG_CONFIG_SYSROOT_DIR$($PKG_CONFIG --variable=sdkdir xorg-server)"
 
 CFLAGS="$CFLAGS $XORG_CFLAGS "' -I$(top_srcdir)/src'
 AC_SUBST([CFLAGS])

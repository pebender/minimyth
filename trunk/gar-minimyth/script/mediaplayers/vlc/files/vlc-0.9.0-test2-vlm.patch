diff -Naur vlc-0.9.0-test2-old/src/libvlc.c vlc-0.9.0-test2-new/src/libvlc.c
--- vlc-0.9.0-test2-old/src/libvlc.c	2008-07-09 08:09:53.000000000 -0700
+++ vlc-0.9.0-test2-new/src/libvlc.c	2008-07-16 16:28:53.000000000 -0700
@@ -795,7 +795,7 @@
     }
     free( psz_modules );
 
-#ifdef ENABLE_SOUT
+#ifdef ENABLE_VLM && ENABLE_SOUT
     /* Initialize VLM if vlm-conf is specified */
     psz_parser = config_GetPsz( p_libvlc, "vlm-conf" );
     if( psz_parser && *psz_parser )
@@ -989,7 +989,7 @@
         vlc_object_release( p_intf ); /* for vlc_object_find() */
     }
 
-#ifdef ENABLE_SOUT
+#ifdef ENABLE_VLM && ENABLE_SOUT
     /* Destroy VLM if created in libvlc_InternalInit */
     if( priv->p_vlm )
     {

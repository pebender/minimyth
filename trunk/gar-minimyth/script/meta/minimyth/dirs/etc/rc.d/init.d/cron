#!/bin/sh
################################################################################
# cron
################################################################################
. /etc/rc.d/functions

start() {
    mm_message_output info "starting cron ..."

    # If crond is not running and there is at least one file in the crontabs
    # directory, then start crond.
    if /usr/bin/test -z "`/bin/pidof crond`" ; then
        if /usr/bin/test -d /var/spool/cron/crontabs ; then
            if /usr/bin/test `/bin/ls -1 /var/spool/cron/crontabs/ | /usr/bin/wc -l` -gt 0 ; then
                /usr/sbin/crond
            fi
        fi
    fi
}

stop() {
    mm_message_output info "stopping cron ..."

    /usr/bin/test -n "`/bin/pidof crond`" && /usr/bin/killall crond
}

case $1 in
    start) start ;;
    stop)  stop  ;;
esac

exit 0

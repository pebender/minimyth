#!/bin/sh
################################################################################
# video
#
# The script configures and starts the mythbackend.
################################################################################
. /etc/rc.d.sh/functions

start() {

    if /usr/bin/test "${MM_BACKEND_ENABLED}" = "yes" ; then
        mm_message_output info "starting MythTV backend ..."

        if /usr/bin/test -e '/usr/bin/mythbackend' ; then
            /bin/su -c "/usr/bin/mythbackend --daemon 2>&1 | /usr/bin/logger -t mythbackend -p local0.info" - minimyth
        else
            mm_message_output err "error: '/usr/bin/mythbackend' not found."
        fi
    fi

    return 0
}

stop() {
    if /usr/bin/test -n "`/bin/pidof mythbackend`" ; then
        mm_message_output info "stopping MythTV backend ..."

        /usr/bin/killall mythbackend
    fi

    return 0
}

case $1 in
    start) start ;;
    stop)  stop  ;;
esac

exit 0

diff -Naur lirc-20090715Z-old/drivers/lirc_i2c/lirc_i2c.c lirc-20090715Z-new/drivers/lirc_i2c/lirc_i2c.c
--- lirc-20090715Z-old/drivers/lirc_i2c/lirc_i2c.c	2009-07-07 08:39:06.000000000 -0700
+++ lirc-20090715Z-new/drivers/lirc_i2c/lirc_i2c.c	2009-07-23 11:31:02.000000000 -0700
@@ -567,7 +567,9 @@
 
 	if (retval < 0) {
 		printk(KERN_ERR "lirc_i2c: failed to register driver!\n");
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2, 6, 26)
 		i2c_detach_client(&ir->c);
+#endif
 		kfree(ir);
 		return retval;
 	}

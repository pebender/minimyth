diff -Naur acpid-1.0.4-old/acpid.c acpid-1.0.4-new/acpid.c
--- acpid-1.0.4-old/acpid.c	2004-10-17 15:33:51.000000000 -0700
+++ acpid-1.0.4-new/acpid.c	2005-12-15 16:01:04.000000000 -0800
@@ -61,7 +61,7 @@
 main(int argc, char **argv)
 {
 	int event_fd;
-	int sock_fd;
+	int sock_fd = -1;
 
 	/* learn who we really are */
 	progname = (const char *)strrchr(argv[0], '/');
@@ -386,9 +386,7 @@
 	umask(0);
 
 	/* get outta the way */
-	chdir("/");
-
-	return 0;
+	return chdir("/");
 }
 
 static int
diff -Naur acpid-1.0.4-old/ud_socket.c acpid-1.0.4-new/ud_socket.c
--- acpid-1.0.4-old/ud_socket.c	2003-11-17 13:24:58.000000000 -0800
+++ acpid-1.0.4-new/ud_socket.c	2005-12-15 16:01:04.000000000 -0800
@@ -58,7 +58,7 @@
 	while (1) {
 		int newsock = 0;
 		struct sockaddr_un cliaddr;
-		int len = sizeof(struct sockaddr_un);
+		socklen_t len = sizeof(struct sockaddr_un);
 
 		newsock = accept(listenfd, (struct sockaddr *)&cliaddr, &len);
 		if (newsock < 0) {

diff -Naur libX11-1.3.3-old/configure.ac libX11-1.3.3-new/configure.ac
--- libX11-1.3.3-old/configure.ac	2010-01-16 17:48:13.000000000 -0800
+++ libX11-1.3.3-new/configure.ac	2010-01-16 17:49:22.000000000 -0800
@@ -7,6 +7,9 @@
         [https://bugs.freedesktop.org/enter_bug.cgi?product=xorg],
         libX11)
 AC_CONFIG_SRCDIR([Makefile.am])
+AC_CANONICAL_BUILD
+AC_CANONICAL_HOST
+
 AM_INIT_AUTOMAKE([foreign dist-bzip2])
 
 AM_MAINTAINER_MODE
@@ -24,6 +27,8 @@
 # to avoid autoconf errors.
 AC_USE_SYSTEM_EXTENSIONS
 XORG_DEFAULT_OPTIONS
+PKG_PROG_PKG_CONFIG
+m4_pattern_allow([^PKG_CONFIG_SYSROOT_DIR$])
 
 # Checks for programs.
 AC_PROG_LIBTOOL
@@ -39,6 +44,27 @@
 fi
 AC_SUBST([CC_FOR_BUILD])
 
+if test x"$CPPFLAGS_FOR_BUILD" = x; then
+	if test ! x"$cross_compiling" = xyes; then
+    	       CPPFLAGS_FOR_BUILD=${CPPFLAGS}
+	fi
+fi
+AC_SUBST(CPPFLAGS_FOR_BUILD)
+
+if test x"$CFLAGS_FOR_BUILD" = x; then
+	if test ! x"$cross_compiling" = xyes; then
+    	       CFLAGS_FOR_BUILD=${CFLAGS}
+	fi
+fi
+AC_SUBST(CFLAGS_FOR_BUILD)
+
+if test x"$LDFLAGS_FOR_BUILD" = x; then
+	if test ! x"$cross_compiling" = xyes; then
+    	       LDFLAGS_FOR_BUILD=${LDFLAGS}
+	fi
+fi
+AC_SUBST(LDFLAGS_FOR_BUILD)
+
 XORG_PROG_RAWCPP
 
 # Find perl for "make check" tests in nls/localerules.in
@@ -328,7 +354,7 @@
 # Find keysymdef.h
 #
 AC_MSG_CHECKING([keysymdef.h])
-dir=`pkg-config --variable=includedir xproto`
+dir=$PKG_CONFIG_SYSROOT_DIR`$PKG_CONFIG --variable=includedir xproto`
 KEYSYMDEF="$dir/X11/keysymdef.h"
 if test -f "$KEYSYMDEF"; then
         AC_MSG_RESULT([$KEYSYMDEF])
diff -Naur libX11-1.3.3-old/src/util/Makefile.am libX11-1.3.3-new/src/util/Makefile.am
--- libX11-1.3.3-old/src/util/Makefile.am	2010-01-16 17:47:58.000000000 -0800
+++ libX11-1.3.3-new/src/util/Makefile.am	2010-01-16 17:48:44.000000000 -0800
@@ -4,6 +4,9 @@
 makekeys_CFLAGS=$(X11_CFLAGS)
 
 CC = @CC_FOR_BUILD@
+CPPFLAGS = @CPPFLAGS_FOR_BUILD@
+CFLAGS = @CFLAGS_FOR_BUILD@
+LDFLAGS = @LDFLAGS_FOR_BUILD@
 
 EXTRA_DIST = mkks.sh
 

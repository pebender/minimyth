################################################################################
# MM_FONT configuration variables and files.
################################################################################
conf_clean_MM_FONT() {
    /bin/rm -rf /tmp/init.conf.font

    return 0
}

conf_check_MM_FONT() {
    return 0
}

conf_default_MM_FONT() {
    local font
    local font_list

    if /usr/bin/test -n "${MM_FONT_FILE_TTF_DELETE}" ; then
        font_list=''
        if /usr/bin/test -d /usr/lib/X11/fonts/TTF ; then
            for font in `cd /usr/lib/X11/fonts/TTF ; /bin/ls -1 ${MM_FONT_FILE_TTF_DELETE} 2> /dev/null` ; do
                if ! /bin/echo " ${MM_FONT_FILE_TTF_ADD} " | /bin/grep -q " ${font} " ; then
                    font_list="${font_list} ${font}"
                fi
            done
        fi
       MM_FONT_FILE_TTF_DELETE="${font_list}"
    fi

    MM_FONT_FILE_TTF_ADD=`/bin/echo " ${MM_FONT_FILE_TTF_ADD} " | /bin/sed \
	-e 's%[ \t][ \t]*% %g' \
        -e 's% \([^ /]\)% /\1%g' \
        -e 's%//*%/%g' \
        -e 's%^ %%' \
        -e 's% $%%'`

    return 0
}

conf_write_MM_FONT() {
    local conf_file=$1

    conf_variable_write "${conf_file}" MM_FONT_FILE_TTF_DELETE "${MM_FONT_FILE_TTF_DELETE}"
    conf_variable_write "${conf_file}" MM_FONT_FILE_TTF_ADD    "${MM_FONT_FILE_TTF_ADD}"

    return 0
}

conf_fetch_MM_FONT() {
    local name_remote
    local name_local

    if /usr/bin/test -n "${MM_FONT_FILE_TTF_ADD}" ; then
        /bin/mkdir -p /home/minimyth/.mythtv
        for name_remote in ${MM_FONT_FILE_TTF_ADD} ; do
            name_local=`/usr/bin/basename ${name_remote}`
            name_local="/usr/lib/X11/fonts/TTF/${name_local}"
            /bin/rm -f ${name_local}
            mm_confro_get ${name_remote} ${name_local}
            if /usr/bin/test ! -e ${name_local} ; then
                mm_message_output err "error: failed to fetch '${name_remote}' file."
            fi
        done
    fi

    return 0
}

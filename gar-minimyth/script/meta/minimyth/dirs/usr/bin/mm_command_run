#!/bin/sh
################################################################################
# mm_command_run
################################################################################
[ -n "`mm_var_get MM_DEBUG`" ] && set -x

COMMAND=$1

MM_LOGFILE=`mm_var_get MM_LOGFILE`

LOG_DIR=`echo ${MM_LOGFILE} | sed -e 's%[^/]*$%%' -e 's%/$%%'`

if [ -w ${MM_LOGFILE} ] || [ -w ${LOG_DIR} ] ; then
    echo "--- execution start: ${COMMAND}"  >> ${MM_LOGFILE} 2>&1
    ${COMMAND}                              >> ${MM_LOGFILE} 2>&1
    echo "--- execution end  : ${COMMAND}"  >> ${MM_LOGFILE} 2>&1
else
    echo "--- execution start: ${COMMAND}"  2>&1
    ${COMMAND}                              2>&1
    echo "--- execution end  : ${COMMAND}"  2>&1
fi

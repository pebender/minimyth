diff -Naur linux-2.6.36.3-old/drivers/usb/core/hcd.c linux-2.6.36.3-new/drivers/usb/core/hcd.c
--- linux-2.6.36.3-old/drivers/usb/core/hcd.c	2011-01-07 14:39:58.000000000 -0800
+++ linux-2.6.36.3-new/drivers/usb/core/hcd.c	2011-01-30 15:35:29.000000000 -0800
@@ -1945,7 +1945,6 @@
 
 	dev_dbg(&rhdev->dev, "usb %s%s\n",
 			(msg.event & PM_EVENT_AUTO ? "auto-" : ""), "resume");
-	clear_bit(HCD_FLAG_WAKEUP_PENDING, &hcd->flags);
 	if (!hcd->driver->bus_resume)
 		return -ENOENT;
 	if (hcd->state == HC_STATE_RUNNING)
@@ -1953,6 +1952,7 @@
 
 	hcd->state = HC_STATE_RESUMING;
 	status = hcd->driver->bus_resume(hcd);
+	clear_bit(HCD_FLAG_WAKEUP_PENDING, &hcd->flags);
 	if (status == 0) {
 		/* TRSMRCY = 10 msec */
 		msleep(10);

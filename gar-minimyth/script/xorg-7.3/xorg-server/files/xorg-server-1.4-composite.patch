diff -Naur xorg-server-1.4-old/hw/xfree86/xaa/Makefile.am xorg-server-1.4-new/hw/xfree86/xaa/Makefile.am
--- xorg-server-1.4-old/hw/xfree86/xaa/Makefile.am	2007-08-23 12:04:54.000000000 -0700
+++ xorg-server-1.4-new/hw/xfree86/xaa/Makefile.am	2008-04-20 22:14:37.000000000 -0700
@@ -9,7 +9,9 @@
 POLYSEG = s-xaaLine.c s-xaaDashLine.c
 
 libxaa_la_LDFLAGS = -avoid-version
+if COMPOSITE
 libxaa_la_LIBADD = $(top_builddir)/miext/cw/libcw.la
+endif
 
 module_LTLIBRARIES = libxaa.la
 libxaa_la_SOURCES = xaaInit.c xaaGC.c xaaInitAccel.c xaaFallback.c \
diff -Naur xorg-server-1.4-old/hw/xfree86/xaa/Makefile.in xorg-server-1.4-new/hw/xfree86/xaa/Makefile.in
--- xorg-server-1.4-old/hw/xfree86/xaa/Makefile.in	2007-09-05 23:00:27.000000000 -0700
+++ xorg-server-1.4-new/hw/xfree86/xaa/Makefile.in	2008-04-20 22:10:56.000000000 -0700
@@ -60,7 +60,7 @@
 am__installdirs = "$(DESTDIR)$(moduledir)" "$(DESTDIR)$(sdkdir)"
 moduleLTLIBRARIES_INSTALL = $(INSTALL)
 LTLIBRARIES = $(module_LTLIBRARIES)
-libxaa_la_DEPENDENCIES = $(top_builddir)/miext/cw/libcw.la
+@COMPOSITE_TRUE@libxaa_la_DEPENDENCIES = $(top_builddir)/miext/cw/libcw.la
 am__objects_1 = s-xaaLine.lo s-xaaDashLine.lo
 am__objects_2 = l-xaaBitmap.lo l-xaaStipple.lo l-xaaTEGlyph.lo
 am__objects_3 = m-xaaBitmap.lo m-xaaStipple.lo m-xaaTEGlyph.lo
@@ -399,7 +399,7 @@
 MSB_3_FIXED = mf3-xaaBitmap.c mf3-xaaStipple.c
 POLYSEG = s-xaaLine.c s-xaaDashLine.c
 libxaa_la_LDFLAGS = -avoid-version
-libxaa_la_LIBADD = $(top_builddir)/miext/cw/libcw.la
+@COMPOSITE_TRUE@libxaa_la_LIBADD = $(top_builddir)/miext/cw/libcw.la
 module_LTLIBRARIES = libxaa.la
 libxaa_la_SOURCES = xaaInit.c xaaGC.c xaaInitAccel.c xaaFallback.c \
                    xaaBitBlt.c xaaCpyArea.c xaaGCmisc.c xaaCpyWin.c \

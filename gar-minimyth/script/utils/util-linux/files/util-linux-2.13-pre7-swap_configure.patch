diff -Naur util-linux-2.13-pre7-old/mount/swap.configure util-linux-2.13-pre7-new/mount/swap.configure
--- util-linux-2.13-pre7-old/mount/swap.configure	2005-09-12 13:37:19.000000000 -0700
+++ util-linux-2.13-pre7-new/mount/swap.configure	2006-11-04 07:59:06.000000000 -0800
@@ -12,12 +12,25 @@
 # random value (like #define PAGE_SIZE 4096) instead of including page.h.
 SWAPH=
 PAGEH=
-if [ -f /usr/include/sys/swap.h ]; then
-	SWAPH="#include <sys/swap.h>"
-	if [ -f /usr/include/asm/page.h ]; then
-		PAGEH="#include <asm/page.h>"
+rm -f conftest conftest.c
+echo '#include <sys/swap.h>' >  conftest.c
+echo '#include <unistd.h>'   >> conftest.c
+echo 'main() { exit(0); }'   >> conftest.c
+eval $compile
+if test -s conftest ; then
+	SWAPH='#include <sys/swap.h>'
+	rm -f conftest conftest.c
+	echo '#include <asm/page.h>' >> conftest.c
+	echo '#include <sys/swap.h>' >  conftest.c
+	echo '#include <unistd.h>'   >> conftest.c
+	echo 'main() { exit(0); }'   >> conftest.c
+	eval $compile
+	if test -s conftest ; then
+		PAGEH='#include <asm/page.h>'
 	fi
 fi
+
+rm -f conftest conftest.c swapargs.h
 echo $PAGEH > conftest.c
 echo $SWAPH >> conftest.c
 echo '#include <unistd.h>

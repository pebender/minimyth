diff -Naur libX11-1.0.99.2-old/configure.ac libX11-1.0.99.2-new/configure.ac
--- libX11-1.0.99.2-old/configure.ac	2006-11-02 17:14:22.000000000 -0800
+++ libX11-1.0.99.2-new/configure.ac	2006-11-08 06:47:38.000000000 -0800
@@ -7,6 +7,9 @@
         [https://bugs.freedesktop.org/enter_bug.cgi?product=xorg],
         libX11)
 AC_CONFIG_SRCDIR([Makefile.am])
+AC_CANONICAL_BUILD
+AC_CANONICAL_HOST
+
 AM_INIT_AUTOMAKE([dist-bzip2 foreign])
 
 AM_MAINTAINER_MODE
@@ -18,6 +21,15 @@
 AC_PROG_LIBTOOL
 AC_PROG_CC
 
+AC_MSG_CHECKING([for CC_FOR_BUILD])
+if test x$host != x$build ; then
+    CC_FOR_BUILD=${CC_FOR_BUILD-gcc}
+else
+    CC_FOR_BUILD=${CC}
+fi
+AC_MSG_RESULT([$CC_FOR_BUILD])
+AC_SUBST(CC_FOR_BUILD)
+
 XORG_PROG_RAWCPP
 
 # Build with XCB support?
diff -Naur libX11-1.0.99.2-old/src/util/Makefile.am libX11-1.0.99.2-new/src/util/Makefile.am
--- libX11-1.0.99.2-old/src/util/Makefile.am	2006-10-04 10:43:17.000000000 -0700
+++ libX11-1.0.99.2-new/src/util/Makefile.am	2006-11-08 06:47:38.000000000 -0800
@@ -5,7 +5,12 @@
 makekeys_CFLAGS=$(X11_CFLAGS)
 
 #override CC = gcc
-LINK = $(CC) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
+COMPILE = $(CC_FOR_BUILD) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
+	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+LINK = $(CC_FOR_BUILD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
+
+$(srcdir)/makekeys-makekeys.o:
+	$(COMPILE) -c $< -o $@
 
 EXTRA_DIST = mkks.sh
 
